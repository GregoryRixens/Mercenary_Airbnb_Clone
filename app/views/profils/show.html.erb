<div class="container mt-5">
  <!-- User Profile Card -->
  <h2>My Infos</h2>
  <div class="card mb-3">
    <div class="card-header">
      <div class="d-flex">
        <h1><%= @profil.first_name %> <%= @profil.last_name %></h1>
      </div>
    </div>
    <div class="card-body">
      <% if @profil.photo.attached? == true  %>
      <%= cl_image_tag @profil.photo.key, height: 300, width: 400, crop: :fill %>
      <% else %>
      <%= cl_image_tag("download_grlwat", width: 400, height: 300, crop: :fill) %>
      <% end %>
      <p>Email: <%= @profil.email %></p>
      <p>Username: <%= @profil.user_name %></p>
    </div>
    <div class="card-footer d-flex justify-content-between">
      <%= link_to 'Edit', edit_profil_path(@profil), class: 'btn btn-primary' %>
      <%= link_to 'Create a new offer', new_offer_path(@offer), class: 'btn btn-success' %>
      <%= link_to "Bookings Received", bookings_received_profil_path(@profil), class: "btn btn-primary" %>

    </div>
  </div>

  <!-- User Offers -->
    <h2>My Offers</h2>
  <div class="d-flex flex-wrap border-bottom">

    <% @profil.offers.each do |offer| %>
      <div class="card m-3" style="width: 18rem;">
        <div class="card-header">
          <div class="d-flex">
            <h1><%= offer.title %></h1>
          </div>
        </div>
        <div class="card-body">
          <p>Price: <%= offer.price %>$</p>
          <p>Description: <%= offer.description %></p>
          <p>Address: <%= offer.address %></p>
        </div>
        <div class="card-footer">
          <%= link_to 'Edit', edit_offer_path(offer), class: 'btn btn-warning' %>
          <%= link_to 'Delete', offer_path(offer),class: 'btn btn-warning', data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this list?" } %>

        </div>
      </div>
    <% end %>
  </div>

  <!-- User Reservations -->

    <h2>My Bookings</h2>
  <div class="d-flex flex-wrap">
    <% @profil.reservations.each do |reservation| %>
      <div class="card m-3" style="width: 18rem;">
        <div class="card-header">
          <div class="d-flex">
            <h1><%= reservation.offer.title %></h1>
          </div>
        </div>
        <div class="card-body">
          <p>Price: <%= reservation.offer.price.to_s %>$</p>
          <p>Address: <%= reservation.offer.address %></p>
          <p>Duration: <%= reservation.start_date %> to <%= reservation.end_date %></p>
        </div>
        <div class="card-footer">
          <%= link_to 'Cancel', reservation_path(reservation),class: 'btn btn-warning', data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this booking?" } %>

        </div>
      </div>
    <% end %>
  </div>
</div>
